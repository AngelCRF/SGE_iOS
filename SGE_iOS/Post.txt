//
//  Post.swift
//  SGE_iOS
//
//  Created by Kevin Angel on 11/02/18.
//  Copyright Â© 2018 KEAM. All rights reserved.
//

import Foundation
import UIKit

struct Post {
    var id_post: String?
    var createdBy: User
    var date: String?
    var group: String?
    var caption: String?
    var image: UIImage?
    var numberOfComments: Int?
    
    static func fetchPosts(origin:String) -> [Postsdec] {
        var posts = [Postsdec]()
        if origin == "0" {
            // Obtain JSON with all the posts
            let path = Bundle.main.path(forResource: "allPosts", ofType: "json")
            let url = URL(fileURLWithPath: path!)
            do{
                let data = try Data(contentsOf: url)
                posts = try JSONDecoder().decode([Postsdec].self, from: data)
            }
            catch {
                
            }
        } else {
            // Obtain JSON with filtered posts
        }
        //let duc = User(username: "Kevin Angel", profileImage: UIImage(named: "icon_user"))
        //let post1 = Post(createdBy: duc, timeAgo: "1 hr", caption: "Wise words from Will Smith: The only thing that I see that is distinctly different from me is: I'm not afraid to die on a treadmillz.", image: UIImage(named: "logo_it"), numberOfComments: 32)
        //posts.append(post1)
        return posts
    }
}

struct Postsdec: Decodable {
    var id_post: String = ""
    var createdBy: User? = nil
    var date: String = ""
    var group: String = ""
    var caption: String = ""
    var image: String? = nil
    var comments = [Comment]()
}

struct Comment: Decodable {
    var comment: String = ""
    var createdBy: User? = nil
}

struct User: Decodable {
    var username: String = ""
    var profileImage: String = ""
    var id_user: String = ""
}



override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    if let cell = sender as? UITableViewCell {
        let i = NewsFeedTableView.indexPath(for: cell)!.row
        NewsFeedTableView.deselectRowAtIndexPath(, animated: true)
        if segue.identifier == "ShowPostSegue" {
            let vc = segue.destination as! ShowPostViewController
            //vc.data = currentResponse[i] as NSDictionary
        }
    }
}
